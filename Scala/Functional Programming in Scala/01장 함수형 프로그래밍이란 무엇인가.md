함수형 프로그래밍(FP)은 **순수 함수(pure function)** 들로만, 다시 말해서 부수 효과(side effect)가 없는 함수들로만 구축한다는 전체에 기초한다.

부수효과 : 그냥 결과를 돌려주는 것 이외의 어떤 일

* 변수를 수정한다
* 자료구조를 제자리에서 수정한다
* 객체의 필드를 설정한다.
* 예외를 던지거나 오류를 내면서 실행을 중단한다.
* 콘솔에 출력하거나 사용자의 입력을 읽어들인다.
* 파일에 기록하거나 파일에서 읽어들인다.
* 화면에 그린다.

> 응?? 숨수 함수만으로 뭘 어떻게 개발하라는 거지?

함수형 프로그래밍은 프로그램을 장성하는 방식에 대한 제약이지, 표현 가능한 프로그램의 종류에 대한 제약이 아니라는 것이다. 모든 종류의 프로그램을 부수 효과 없이 표현하는 방법을 배우게 된다. FP의 원리를 따르면 모듈성이 증가하여 이롭다.

### 부수 효과가 있는 프로그램

```Scala
class Cafe {
  def buyCoffe(cc: CreditCard): Coffee = {
    val cup = new Coffee()
    cc.charge(cup.price)
    cup
  }
}
```

`cc.charge(cup.price)`가 부수효과의 예이다.

#### 지급 객체 추가

```Scala
class Cafe {
  def buyCoffe(cc: CreditCard, p: Payments): Coffee = {
    val cup = new Coffee()
    p.charge(cc, cup.price)
    cup
  }
}
```

### 합수적 해법: 부수 효과의 제거

부수 효과를 제거하고 buyCoffee가 Coffee뿐만 아니라 청구건을 하나의 값으로 돌려주게 하는 것이다.

```Scala
class Cafe {
  def buyCoffe(cc: CreditCard): (Coffee, Charge) = {
    val cup = new Coffee()    
    (cup, Charge(cc, cup.price))
  }
}
```

청구건의 생성 문제가 청구건의 처리 또는 연동 문제와 분리되었다.
